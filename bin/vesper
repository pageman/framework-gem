#!/usr/bin/env ruby

require 'fileutils.rb'

if ARGV[0] && ARGV[1]
  case ARGV[0]
  when 'create'
    puts "Creating #{ARGV[1]}..."
    FileUtils.cp_r File.dirname(__FILE__) + '/../lib/vesper/template', ARGV[1] unless Dir.exists? ARGV[1]
    puts "Bundling gems..."
    exec "cd #{ARGV[1]} && bundle > /dev/null && echo '\n#{ARGV[1]} is ready. Next steps:\n  cd #{ARGV[1]}\n  rackup\n'"
  else
    # This should be temporary until there are more ARGV[0] commands
    puts ''
    puts 'To create a Vesper app:'
    puts '  vesper create <app_name>'
    puts ''
  end
else
  puts ''
  puts 'To create a Vesper app:'
  puts '  vesper create <app_name>'
  puts ''
end